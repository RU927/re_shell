# install tpm: git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
# Press prefix + I (capital i, as in Install) to fetch the plugin
# Press prefix + alt + u (lowercase u as in uninstall) to remove the plugin.
# prefix + U updates plugins

# set-environment -g PATH "/usr/local/bin:/bin:/usr/bin"
# set-option -g default-shell /usr/bin/zsh

# Плагины
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'jimeh/tmux-themepack'
set -g @plugin 'tmux-plugins/tmux-resurrect' 
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-sessionist'

# set -g @plugin 'catppuccin/tmux'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-pain-control'
set -g @plugin 'tmux-plugins/tmux-prefix-highlight'

set -g @themepack 'powerline/default/orange'
set -g @resurrect-capture-pane-contents 'on'
set -g @continuum-restore 'on'


set -g default-terminal "xterm-256color"
# set -g default-terminal "xterm-kitty"
set-option -sa terminal-overrides ",xterm*:Tc"
# Use vim keybindings in copy mode
setw -g mode-keys vi
set -g status-keys emacs
# Mouse mode
# setw -g mouse on
set -g mouse on
# Изменение индексов
set -g base-index 1
setw -g pane-base-index 1
# Don't wait for an escape sequence after seeing C-a.
set -sg escape-time 0
set -g set-clipboard on
# set -g focus-events on
set -g @yank_selection 'clipboard' # or 'primary' 'secondary' or 'clipboard'
set -g @yank_selection_mouse 'clipboard' # or 'clipboard' 'primary' or 'secondary'

# Automatically renumber window numbers on closing a pane (tmux >= 1.7).
set -g renumber-windows on 

# Status bar.
set -g status-bg '#343d46'
set -g status-fg white
set -g status-left-length 40
set -g status-left '#[fg=yellow]#S ⧉ '
set -g status-right "#[fg=yellow]$USER@#h #[fg=magenta]%l:%M %p"
set -g status-interval 60 # Default is 15.

# bindings
# Основной префикс
unbind C-b
set-option -g prefix C-Space
bind-key C-Space send-prefix
bind Escape copy-mode
# set-window-option -g mode-keys vi
bind-key -T copy-mode-vi 'v' send -X begin-selection 
bind-key -T copy-mode-vi 'y' send -X copy-selection 
# unbind -T copy-mode-vi MouseDragEnd1Pane

# Tab between windows
set-option -gw xterm-keys on
# set-option -gw alacritty-keys on

# Сортировка по имени
bind s choose-tree -sZ -O name

# Easy config reload
# bind R source ~/.tmux.conf\\; display "~/.tmux.conf sourced!"
unbind r
bind r source-file ~/.tmux.conf

# Switch to workspace via Alt + #.
bind-key    -T root         M-0   select-window -t :10
bind-key    -T root         M-1   select-window -t :1
bind-key    -T root         M-2   select-window -t :2
bind-key    -T root         M-3   select-window -t :3
bind-key    -T root         M-4   select-window -t :4
bind-key    -T root         M-5   select-window -t :5
bind-key    -T root         M-6   select-window -t :6
bind-key    -T root         M-7   select-window -t :7
bind-key    -T root         M-8   select-window -t :8
bind-key    -T root         M-9   select-window -t :9

# switch panels with ctrl + vim direction
# also without pressing prefix
bind-key    -T prefix       j     select-pane -D
bind-key    -T prefix       k     select-pane -U
bind-key    -T prefix       l     select-pane -R
bind-key    -T prefix       h     select-pane -L

bind-key    -T root       C-j     select-pane -D
bind-key    -T root       C-k     select-pane -U
bind-key    -T root       C-l     select-pane -R
bind-key    -T root       C-h     select-pane -L

# Windows
bind-key -n M-n new-window
# bind-key -n C-x kill-window
# bind-key -g d confirm-before -p "kill-window #W? (y/n)" kill-window
bind-key -n M-x confirm-before -p "kill-window #W? (y/n)" kill-window
bind -Tprefix Tab switch -Ttab
# bind-key -n C-t next-window
# bind-key -n C-b previous-window
bind-key -n H previous-window
bind-key -n L next-window

# Fast toggle (normally prefix-l).
bind Tab last-window

# Set easier window split keys
bind-key -n M-h split-window -h
bind-key -n M-v split-window -v

# Переназначение клавиш
# unbind %
# bind -n | split-window -h 

# unbind '"'
# bind -n - split-window -v

bind -r j resize-pane -D 5
bind -r k resize-pane -U 5
bind -r l resize-pane -R 5
bind -r h resize-pane -L 5

bind -r m resize-pane -Z

# Старт менеджера плагинов
run '~/.tmux/plugins/tpm/tpm'

